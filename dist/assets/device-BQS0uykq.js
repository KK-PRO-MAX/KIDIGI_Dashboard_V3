import{a as i}from"./index-B9ygI19o.js";const a=e=>new Promise(t=>setTimeout(t,e)),c=i.create({baseURL:"https://guiz.haomengwl.com/api",timeout:1e4,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(e=>{var o;const t=localStorage.getItem("token");return t&&(e.headers.token=t),console.log("Device API 发送请求:",(o=e.method)==null?void 0:o.toUpperCase(),e.url),console.log("请求数据:",e.data),e},e=>(console.error("请求拦截器错误:",e),Promise.reject(e)));c.interceptors.response.use(e=>(console.log("Device API 收到响应:",e.status,e.data),e.data&&typeof e.data=="object"&&(e.data.ret!==void 0&&console.log("  ✓ ret:",e.data.ret),e.data.code!==void 0&&console.log("  ✓ code:",e.data.code),e.data.msg!==void 0&&console.log("  ✓ msg:",e.data.msg),e.data.ret_data!==void 0&&(console.log("  ✓ ret_data 类型:",Array.isArray(e.data.ret_data)?"Array":typeof e.data.ret_data),Array.isArray(e.data.ret_data)&&console.log("    数据数量:",e.data.ret_data.length))),e),e=>(console.error("Device API 响应错误:",e.message||e),e.response?(console.error("  HTTP 状态码:",e.response.status),console.error("  响应数据:",e.response.data)):e.request?console.error("  没有接收到响应"):console.error("  请求错误:",e.message),Promise.reject(e)));function u(e={}){return d(e)}async function d(e={}){return await a(500),{data:{ret:0,code:200,msg:"success",ret_data:[{id:1,device_id:"DEV001",device_name:"iPhone 15",device_type_id:1,device_nfc_code:1001,cabinet_no:1,locker_id:1},{id:2,device_id:"DEV002",device_name:"iPad Pro",device_type_id:2,device_nfc_code:1002,cabinet_no:2,locker_id:1},{id:3,device_id:"DEV003",device_name:"MacBook Pro",device_type_id:3,device_nfc_code:1003,cabinet_no:3,locker_id:2}],timestamp:Date.now()},status:200,statusText:"OK",headers:{},config:{}}}function l(e){return n()}async function n(e){return await a(500),{data:{ret:0,code:200,msg:"设备添加成功",ret_data:Math.floor(Math.random()*1e3)+100,timestamp:Date.now()},status:200,statusText:"OK",headers:{},config:{}}}function _(e){return s(e)}async function s(e){return await a(500),{data:{ret:0,code:200,msg:"设备编辑成功",ret_data:e.id,timestamp:Date.now()},status:200,statusText:"OK",headers:{},config:{}}}function v(e){return!e||typeof e.id!="number"||e.id<=0?Promise.reject(new Error("Invalid device id")):r(e)}async function r(e){return await a(500),{data:{ret:0,code:200,msg:"设备删除成功",ret_data:e.id,timestamp:Date.now()},status:200,statusText:"OK",headers:{},config:{}}}export{l as a,v as d,_ as e,u as g};
